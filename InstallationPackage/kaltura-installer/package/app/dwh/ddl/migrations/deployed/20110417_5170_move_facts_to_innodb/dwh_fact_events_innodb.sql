DROP TABLE IF EXISTS `kalturadw`.`dwh_fact_events_innodb`;
CREATE TABLE `kalturadw`.`dwh_fact_events_innodb` (
  `file_id` INT(11) NOT NULL,
  `event_id` INT(11) NOT NULL,
  `event_type_id` SMALLINT(6) NOT NULL,
  `client_version` VARCHAR(31) DEFAULT NULL,
  `event_time` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
  `event_date_id` INT(11) DEFAULT NULL,
  `event_hour_id` TINYINT(4) DEFAULT NULL,
  `session_id` VARCHAR(50) DEFAULT NULL,
  `partner_id` INT(11) DEFAULT NULL,
  `entry_id` VARCHAR(20) DEFAULT NULL,
  `unique_viewer` VARCHAR(40) DEFAULT NULL,
  `widget_id` VARCHAR(31) DEFAULT NULL,
  `ui_conf_id` INT(11) DEFAULT NULL,
  `uid` VARCHAR(64) DEFAULT NULL,
  `current_point` INT(11) DEFAULT NULL,
  `duration` INT(11) DEFAULT NULL,
  `user_ip` VARCHAR(15) DEFAULT NULL,
  `user_ip_number` INT(10) UNSIGNED DEFAULT NULL,
  `country_id` INT(11) DEFAULT NULL,
  `location_id` INT(11) DEFAULT NULL,
  `process_duration` INT(11) DEFAULT NULL,
  `control_id` VARCHAR(15) DEFAULT NULL,
  `seek` INT(11) DEFAULT NULL,
  `new_point` INT(11) DEFAULT NULL,
  `domain_id` INT(11) DEFAULT NULL,
  `entry_media_type_id` INT(11) DEFAULT NULL,
  `entry_partner_id` INT(11) DEFAULT NULL,
  `referrer_id` INT(11) DEFAULT NULL
) ENGINE=INNODB DEFAULT CHARSET=utf8
 PARTITION BY RANGE (event_date_id)
(PARTITION p_20090731 VALUES LESS THAN (20090801) ENGINE = INNODB,
 PARTITION p_20090831 VALUES LESS THAN (20090901) ENGINE = INNODB,
 PARTITION p_20090930 VALUES LESS THAN (20091001) ENGINE = INNODB,
 PARTITION p_20091031 VALUES LESS THAN (20091101) ENGINE = INNODB,
 PARTITION p_20091130 VALUES LESS THAN (20091201) ENGINE = INNODB,
 PARTITION p_20091231 VALUES LESS THAN (20100101) ENGINE = INNODB,
 PARTITION p_20100131 VALUES LESS THAN (20100201) ENGINE = INNODB,
 PARTITION p_20100228 VALUES LESS THAN (20100301) ENGINE = INNODB,
 PARTITION p_20100331 VALUES LESS THAN (20100401) ENGINE = INNODB,
 PARTITION p_20100430 VALUES LESS THAN (20100501) ENGINE = INNODB,
 PARTITION p_20100531 VALUES LESS THAN (20100601) ENGINE = INNODB,
 PARTITION p_20100630 VALUES LESS THAN (20100701) ENGINE = INNODB,
 PARTITION p_20100731 VALUES LESS THAN (20100801) ENGINE = INNODB,
 PARTITION p_20100831 VALUES LESS THAN (20100901) ENGINE = INNODB,
 PARTITION p_20100930 VALUES LESS THAN (20101001) ENGINE = INNODB,
 PARTITION p_20101031 VALUES LESS THAN (20101101) ENGINE = INNODB,
 PARTITION p_20101130 VALUES LESS THAN (20101201) ENGINE = INNODB,
 PARTITION p_20101231 VALUES LESS THAN (20110101) ENGINE = INNODB);
call kalturadw.add_daily_partition_for_table('dwh_fact_events_innodb');
